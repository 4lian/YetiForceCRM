
jQuery.Class("KnowledgeBase_Tree_Js",{},{treeInstance:false,generateTree:function(b,e){var d=this;d.treeInstance=b.find("#treeContent");var c=e.result;var a=["search"];d.treeInstance.jstree({core:{data:c,themes:{name:"proton",responsive:true}},plugins:a})},loadTree:function(){var b=this;var a=$(".treeContainer");var d={module:app.getModuleName(),action:"TreeAJAX",};var c=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});AppConnector.request(d).then(function(e){c.progressIndicator({mode:"hide"});b.generateTree(a,e);b.registerTreeEvents(a)})},searchingInTree:function(a){this.treeInstance.jstree(true).search(a)},registerSearchEvent:function(){var c=this;var a=$("#valueSearchTree");var b=$("#btnSearchTree");a.keypress(function(d){if(d.which==13){c.searchingInTree(a.val())}});b.click(function(){c.searchingInTree(a.val())})},registerTreeEvents:function(){var a=this;a.registerSearchEvent();a.treeInstance.on("changed.jstree",function(f,d){if(d.node.original.type=="folder"){var c=Vtiger_Header_Js.getInstance();var b=app.getModuleName();var g={};c.quickCreateModule(b,g)}else{}})},registerEvents:function(){var a=this;a.loadTree()}});