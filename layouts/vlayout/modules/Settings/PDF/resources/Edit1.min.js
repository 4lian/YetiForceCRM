
Settings_PDF_Edit_Js("Settings_PDF_Edit1_Js",{},{advanceFilterInstance:false,init:function(){this.initialize()},getContainer:function(){return this.step1Container},setContainer:function(a){this.step1Container=a;return this},initialize:function(a){if(typeof a==="undefined"){a=jQuery("#pdf_step1")}if(a.is("#pdf_step1")){this.setContainer(a)}else{this.setContainer(jQuery("#pdf_step1"))}},calculateValues:function(){var b=jQuery("#enableAdvanceFilters");if(b.length>0&&b.is(":checked")==false){jQuery("#advanced_filter").val(jQuery("#olderConditions").val())}else{jQuery('[name="filtersavedinnew"]').val("6");var a=this.advanceFilterInstance.getValues();jQuery("#advanced_filter").val(JSON.stringify(a))}},submit:function(){var b=jQuery.Deferred();this.calculateValues();var c=this.getContainer();var e=c.serializeFormData();e.async=false;var d=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});var a=c.serializeFormData();a.action="Save";a.step=1;a.view="";a.async=false;AppConnector.request(a).then(function(g){g=JSON.parse(g);if(g.success==true){Settings_Vtiger_Index_Js.showMessage({text:app.vtranslate("JS_PDF_SAVED_SUCCESSFULLY")});var f=jQuery('[name="record"]',c);if(f.val()===""){f.val(g.result.id);e.record=g.result.id}e.record=g.result.id;AppConnector.request(e).then(function(h){c.hide();d.progressIndicator({mode:"hide"});b.resolve(h)},function(h,i){})}},function(f,g){app.errorLog(f,g)});return b.promise()},registerCancelStepClickEvent:function(a){jQuery("button.cancelLink",a).on("click",function(){window.history.back()})},registerEvents:function(){var a=this.getContainer();a.find('[type="submit"]').removeAttr("disabled");var b=app.validationEngineOptions;b.onValidationComplete=function(d,c){return c};b.promptPosition="bottomRight";a.validationEngine(b);this.registerCancelStepClickEvent(a);this.advanceFilterInstance=Vtiger_AdvanceFilter_Js.getInstance(jQuery(".filterContainer",a))}});